$(document).ready(function () {
        $("#searchWorkingStandardNo").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/WorkingStandardSet/GetWorkingStandardNo",
                    type: "POST",
                    dataType: "json",
                    data: { Prefix: request.term },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return item;
                        }))
                    }
                })
            },
            messages: {
                noResults: 'No results found.',
                results: function (count) {
                    return count + (count > 1 ? ' results' : ' result ') + ' found';
                }
            },
        });  
})


 $(function () {
      AjaxCall('/Controler/GetDepartment', null).done(function (response) {
            if (response.length > 0) {
                $('#searchDepartmentId').html('');
                var options = '';
                options += '<option value="Select">Select Department</option>';
                for (var i = 0; i < response.length; i++) {
                    options += '<option value="' + response[i].val + '">' + response[i].label + '</option>';
                }
                $('#searchDepartmentId').append(options)
            }
        }).fail(function (error) {
            alert(error.StatusText);
        });
        $('#searchDepartmentId').on("change", function () {
            var department = $('#searchDepartmentId').val();
            var obj = { department: department };
            AjaxCall('/Controler/GetWSType', JSON.stringify(obj), 'POST').done(function (response) {
                if (response.length > 0) {
                    $('#searchWorkingStandardTypeId').html('');
                    var options = '';
                    options += '<option value="Select">Select WS Type</option>';
                    for (var i = 0; i < response.length; i++) {
                        options += '<option value="' + response[i].val + '">' + response[i].label + '</option>';
                    }
                    $('#searchWorkingStandardTypeId').append(options);
                }
                else {
                    $('#searchWorkingStandardTypeId').html('');
                }
            }).fail(function (error) {
                //alert(error.StatusText);
                $('#searchWorkingStandardTypeId').html('');
            });
        });
        $('#searchWorkingStandardTypeId').on("change", function () {
            var wstype = $('#searchWorkingStandardTypeId').val();
            var department = $('#searchDepartmentId').val();
            var obj = { wstype: wstype };
            AjaxCall('/Controler/GetWSProcess', JSON.stringify(obj), 'POST').done(function (response) {
                if (response.length > 0) {
                    $('#searchWorkingStandardProcessId').html('');
                    var options = '';
                    options += '<option value="Select">Select WS Process</option>';
                    for (var i = 0; i < response.length; i++) {
                        options += '<option value="' + response[i].val + '">' + response[i].label + '</option>';
                    }
                    $('#searchWorkingStandardProcessId').append(options);
                }
                else {
                    $('#searchWorkingStandardProcessId').html('');
                }
            }).fail(function (error) {
                //alert(error.StatusText);
                $('#searchWorkingStandardProcessId').html('');
            });
        });
    });
    function AjaxCall(url, data, type) {
        return $.ajax({
            url: url,
            type: type ? type : 'GET',
            data: data,
            contentType: 'application/json'
        });
    }
